databaseChangeLog:
  - changeSet:
      id: db-purger-permission-for-table-chain
      author: demis@gematik.de
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      preConditions:
        - onFail: CONTINUE
        - not:
            - changeLogPropertyDefined:
                property: db-user-purger
                value: _UNDEFINED_
      changes:
        - sql:
            sql: >
              GRANT SELECT, DELETE ON TABLE chain TO "${db-user-purger}";
  - changeSet:
      id: db-purger-permission-for-table-pseudonym-chain
      author: demis@gematik.de
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      preConditions:
        - onFail: CONTINUE
        - not:
            - changeLogPropertyDefined:
                property: db-user-purger
                value: _UNDEFINED_
      changes:
        - sql:
            sql: >
              GRANT SELECT, DELETE ON TABLE pseudonym_chain TO "${db-user-purger}";
  - changeSet:
      id: db-purger-permission-for-table-period
      author: demis@gematik.de
      objectQuotingStrategy: QUOTE_ONLY_RESERVED_WORDS
      preConditions:
        - onFail: CONTINUE
        - not:
            - changeLogPropertyDefined:
                property: db-user-purger
                value: _UNDEFINED_
      changes:
        - sql:
            sql: >
              GRANT SELECT, DELETE ON TABLE period TO "${db-user-purger}";
